{"remainingRequest":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\src\\store\\modules\\user.js","dependencies":[{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\src\\store\\modules\\user.js","mtime":1747491002235},{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\babel.config.js","mtime":1747490896596},{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747500624202},{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1747500623976}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbG9naW4sIGdldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwpjb25zdCBnZXREZWZhdWx0U3RhdGUgPSAoKSA9PiB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgcm9sZXM6IFtdCiAgfTsKfTsKY29uc3Qgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKY29uc3QgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBzdGF0ZSA9PiB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IChzdGF0ZSwgdG9rZW4pID0+IHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogKHN0YXRlLCBuYW1lKSA9PiB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IChzdGF0ZSwgYXZhdGFyKSA9PiB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IChzdGF0ZSwgcm9sZXMpID0+IHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfQp9Owpjb25zdCBhY3Rpb25zID0gewogIC8vIOeUqOaIt+eZu+W9lQogIGxvZ2luKHsKICAgIGNvbW1pdAogIH0sIHVzZXJJbmZvKSB7CiAgICBjb25zdCB7CiAgICAgIHVzZXJuYW1lLAogICAgICBwYXNzd29yZAogICAgfSA9IHVzZXJJbmZvOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgbG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZS50cmltKCksCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gcmVzcG9uc2U7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g6I635Y+W55So5oi35L+h5oGvCiAgZ2V0SW5mbyh7CiAgICBjb21taXQsCiAgICBzdGF0ZQogIH0pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIGdldEluZm8oc3RhdGUudG9rZW4pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gcmVzcG9uc2U7CiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICByZWplY3QoJ+mqjOivgeWksei0pe+8jOivt+mHjeaWsOeZu+W9lScpOwogICAgICAgIH0KICAgICAgICBjb25zdCB7CiAgICAgICAgICByb2xlcywKICAgICAgICAgIG5hbWUsCiAgICAgICAgICBhdmF0YXIKICAgICAgICB9ID0gZGF0YTsKCiAgICAgICAgLy8g6KeS6Imy5b+F6aG75piv6Z2e56m65pWw57uECiAgICAgICAgaWYgKCFyb2xlcyB8fCByb2xlcy5sZW5ndGggPD0gMCkgewogICAgICAgICAgcmVqZWN0KCfnlKjmiLfop5LoibLlv4XpobvmmK/pnZ7nqbrmlbDnu4QhJyk7CiAgICAgICAgfQogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g55So5oi355m75Ye6CiAgbG9nb3V0KHsKICAgIGNvbW1pdCwKICAgIHN0YXRlCiAgfSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICByZW1vdmVUb2tlbigpOyAvLyDnp7vpmaR0b2tlbgogICAgICByZXNldFJvdXRlcigpOyAvLyDph43nva7ot6/nlLEKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIOmHjee9rnRva2VuCiAgcmVzZXRUb2tlbih7CiAgICBjb21taXQKICB9KSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIOenu+mZpHRva2VuCiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZSwKICBtdXRhdGlvbnMsCiAgYWN0aW9ucwp9Ow=="},{"version":3,"names":["login","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","roles","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","actions","commit","userInfo","username","password","Promise","resolve","reject","trim","then","response","data","catch","error","length","logout","resetToken","namespaced"],"sources":["D:/桌面/简历/面试题知识库/Vue/admin-system/src/store/modules/user.js"],"sourcesContent":["import { login, getInfo } from '@/api/user'\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\nimport { resetRouter } from '@/router'\r\n\r\nconst getDefaultState = () => {\r\n  return {\r\n    token: getToken(),\r\n    name: '',\r\n    avatar: '',\r\n    roles: []\r\n  }\r\n}\r\n\r\nconst state = getDefaultState()\r\n\r\nconst mutations = {\r\n  RESET_STATE: (state) => {\r\n    Object.assign(state, getDefaultState())\r\n  },\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_NAME: (state, name) => {\r\n    state.name = name\r\n  },\r\n  SET_AVATAR: (state, avatar) => {\r\n    state.avatar = avatar\r\n  },\r\n  SET_ROLES: (state, roles) => {\r\n    state.roles = roles\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 用户登录\r\n  login({ commit }, userInfo) {\r\n    const { username, password } = userInfo\r\n    return new Promise((resolve, reject) => {\r\n      login({ username: username.trim(), password: password })\r\n        .then(response => {\r\n          const { data } = response\r\n          commit('SET_TOKEN', data.token)\r\n          setToken(data.token)\r\n          resolve()\r\n        })\r\n        .catch(error => {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n\r\n  // 获取用户信息\r\n  getInfo({ commit, state }) {\r\n    return new Promise((resolve, reject) => {\r\n      getInfo(state.token)\r\n        .then(response => {\r\n          const { data } = response\r\n\r\n          if (!data) {\r\n            reject('验证失败，请重新登录')\r\n          }\r\n\r\n          const { roles, name, avatar } = data\r\n\r\n          // 角色必须是非空数组\r\n          if (!roles || roles.length <= 0) {\r\n            reject('用户角色必须是非空数组!')\r\n          }\r\n\r\n          commit('SET_ROLES', roles)\r\n          commit('SET_NAME', name)\r\n          commit('SET_AVATAR', avatar)\r\n          resolve(data)\r\n        })\r\n        .catch(error => {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n\r\n  // 用户登出\r\n  logout({ commit, state }) {\r\n    return new Promise((resolve) => {\r\n      removeToken() // 移除token\r\n      resetRouter() // 重置路由\r\n      commit('RESET_STATE')\r\n      resolve()\r\n    })\r\n  },\r\n\r\n  // 重置token\r\n  resetToken({ commit }) {\r\n    return new Promise(resolve => {\r\n      removeToken() // 移除token\r\n      commit('RESET_STATE')\r\n      resolve()\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}"],"mappings":"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","ignoreList":[]}]}