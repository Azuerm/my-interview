{"remainingRequest":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\src\\store\\modules\\permission.js","dependencies":[{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\src\\store\\modules\\permission.js","mtime":1747491016606},{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\babel.config.js","mtime":1747490896596},{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747500624202},{"path":"D:\\桌面\\简历\\面试题知识库\\Vue\\admin-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1747500623976}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5zb21lLmpzIjsKaW1wb3J0IHsgYXN5bmNSb3V0ZXMsIGNvbnN0YW50Um91dGVzIH0gZnJvbSAnQC9yb3V0ZXInOwoKLyoqDQogKiDmoLnmja7op5LoibLov4fmu6Tot6/nlLENCiAqIEBwYXJhbSByb3V0ZXMg6Lev55SxDQogKiBAcGFyYW0gcm9sZXMg6KeS6ImyDQogKi8KZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzLCByb2xlcykgewogIGNvbnN0IHJlcyA9IFtdOwogIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IHsKICAgIGNvbnN0IHRtcCA9IHsKICAgICAgLi4ucm91dGUKICAgIH07CiAgICBpZiAoaGFzUGVybWlzc2lvbihyb2xlcywgdG1wKSkgewogICAgICBpZiAodG1wLmNoaWxkcmVuKSB7CiAgICAgICAgdG1wLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXModG1wLmNoaWxkcmVuLCByb2xlcyk7CiAgICAgIH0KICAgICAgcmVzLnB1c2godG1wKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9CgovKioNCiAqIOWIpOaWreeUqOaIt+aYr+WQpuaciei3r+eUseadg+mZkA0KICogQHBhcmFtIHJvbGVzIOeUqOaIt+inkuiJsg0KICogQHBhcmFtIHJvdXRlIOi3r+eUsQ0KICovCmZ1bmN0aW9uIGhhc1Blcm1pc3Npb24ocm9sZXMsIHJvdXRlKSB7CiAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5yb2xlcykgewogICAgcmV0dXJuIHJvbGVzLnNvbWUocm9sZSA9PiByb3V0ZS5tZXRhLnJvbGVzLmluY2x1ZGVzKHJvbGUpKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9CmNvbnN0IHN0YXRlID0gewogIHJvdXRlczogW10sCiAgYWRkUm91dGVzOiBbXQp9Owpjb25zdCBtdXRhdGlvbnMgPSB7CiAgU0VUX1JPVVRFUzogKHN0YXRlLCByb3V0ZXMpID0+IHsKICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgIHN0YXRlLnJvdXRlcyA9IGNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogIH0KfTsKY29uc3QgYWN0aW9ucyA9IHsKICBnZW5lcmF0ZVJvdXRlcyh7CiAgICBjb21taXQKICB9LCByb2xlcykgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICBsZXQgYWNjZXNzZWRSb3V0ZXM7CiAgICAgIGlmIChyb2xlcy5pbmNsdWRlcygnYWRtaW4nKSkgewogICAgICAgIC8vIOeuoeeQhuWRmOWPr+S7peiuv+mXruaJgOaciei3r+eUsQogICAgICAgIGFjY2Vzc2VkUm91dGVzID0gYXN5bmNSb3V0ZXMgfHwgW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5qC55o2u6KeS6Imy6L+H5ruk6Lev55SxCiAgICAgICAgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcyhhc3luY1JvdXRlcywgcm9sZXMpOwogICAgICB9CiAgICAgIGNvbW1pdCgnU0VUX1JPVVRFUycsIGFjY2Vzc2VkUm91dGVzKTsKICAgICAgcmVzb2x2ZShhY2Nlc3NlZFJvdXRlcyk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlLAogIG11dGF0aW9ucywKICBhY3Rpb25zCn07"},{"version":3,"names":["asyncRoutes","constantRoutes","filterAsyncRoutes","routes","roles","res","forEach","route","tmp","hasPermission","children","push","meta","some","role","includes","state","addRoutes","mutations","SET_ROUTES","concat","actions","generateRoutes","commit","Promise","resolve","accessedRoutes","namespaced"],"sources":["D:/桌面/简历/面试题知识库/Vue/admin-system/src/store/modules/permission.js"],"sourcesContent":["import { asyncRoutes, constantRoutes } from '@/router'\r\n\r\n/**\r\n * 根据角色过滤路由\r\n * @param routes 路由\r\n * @param roles 角色\r\n */\r\nfunction filterAsyncRoutes(routes, roles) {\r\n  const res = []\r\n\r\n  routes.forEach(route => {\r\n    const tmp = { ...route }\r\n    if (hasPermission(roles, tmp)) {\r\n      if (tmp.children) {\r\n        tmp.children = filterAsyncRoutes(tmp.children, roles)\r\n      }\r\n      res.push(tmp)\r\n    }\r\n  })\r\n\r\n  return res\r\n}\r\n\r\n/**\r\n * 判断用户是否有路由权限\r\n * @param roles 用户角色\r\n * @param route 路由\r\n */\r\nfunction hasPermission(roles, route) {\r\n  if (route.meta && route.meta.roles) {\r\n    return roles.some(role => route.meta.roles.includes(role))\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nconst state = {\r\n  routes: [],\r\n  addRoutes: []\r\n}\r\n\r\nconst mutations = {\r\n  SET_ROUTES: (state, routes) => {\r\n    state.addRoutes = routes\r\n    state.routes = constantRoutes.concat(routes)\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  generateRoutes({ commit }, roles) {\r\n    return new Promise(resolve => {\r\n      let accessedRoutes\r\n      if (roles.includes('admin')) {\r\n        // 管理员可以访问所有路由\r\n        accessedRoutes = asyncRoutes || []\r\n      } else {\r\n        // 根据角色过滤路由\r\n        accessedRoutes = filterAsyncRoutes(asyncRoutes, roles)\r\n      }\r\n      commit('SET_ROUTES', accessedRoutes)\r\n      resolve(accessedRoutes)\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n}"],"mappings":";;;;AAAA,SAASA,WAAW,EAAEC,cAAc,QAAQ,UAAU;;AAEtD;AACA;AACA;AACA;AACA;AACA,SAASC,iBAAiBA,CAACC,MAAM,EAAEC,KAAK,EAAE;EACxC,MAAMC,GAAG,GAAG,EAAE;EAEdF,MAAM,CAACG,OAAO,CAACC,KAAK,IAAI;IACtB,MAAMC,GAAG,GAAG;MAAE,GAAGD;IAAM,CAAC;IACxB,IAAIE,aAAa,CAACL,KAAK,EAAEI,GAAG,CAAC,EAAE;MAC7B,IAAIA,GAAG,CAACE,QAAQ,EAAE;QAChBF,GAAG,CAACE,QAAQ,GAAGR,iBAAiB,CAACM,GAAG,CAACE,QAAQ,EAAEN,KAAK,CAAC;MACvD;MACAC,GAAG,CAACM,IAAI,CAACH,GAAG,CAAC;IACf;EACF,CAAC,CAAC;EAEF,OAAOH,GAAG;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASI,aAAaA,CAACL,KAAK,EAAEG,KAAK,EAAE;EACnC,IAAIA,KAAK,CAACK,IAAI,IAAIL,KAAK,CAACK,IAAI,CAACR,KAAK,EAAE;IAClC,OAAOA,KAAK,CAACS,IAAI,CAACC,IAAI,IAAIP,KAAK,CAACK,IAAI,CAACR,KAAK,CAACW,QAAQ,CAACD,IAAI,CAAC,CAAC;EAC5D,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;AAEA,MAAME,KAAK,GAAG;EACZb,MAAM,EAAE,EAAE;EACVc,SAAS,EAAE;AACb,CAAC;AAED,MAAMC,SAAS,GAAG;EAChBC,UAAU,EAAEA,CAACH,KAAK,EAAEb,MAAM,KAAK;IAC7Ba,KAAK,CAACC,SAAS,GAAGd,MAAM;IACxBa,KAAK,CAACb,MAAM,GAAGF,cAAc,CAACmB,MAAM,CAACjB,MAAM,CAAC;EAC9C;AACF,CAAC;AAED,MAAMkB,OAAO,GAAG;EACdC,cAAcA,CAAC;IAAEC;EAAO,CAAC,EAAEnB,KAAK,EAAE;IAChC,OAAO,IAAIoB,OAAO,CAACC,OAAO,IAAI;MAC5B,IAAIC,cAAc;MAClB,IAAItB,KAAK,CAACW,QAAQ,CAAC,OAAO,CAAC,EAAE;QAC3B;QACAW,cAAc,GAAG1B,WAAW,IAAI,EAAE;MACpC,CAAC,MAAM;QACL;QACA0B,cAAc,GAAGxB,iBAAiB,CAACF,WAAW,EAAEI,KAAK,CAAC;MACxD;MACAmB,MAAM,CAAC,YAAY,EAAEG,cAAc,CAAC;MACpCD,OAAO,CAACC,cAAc,CAAC;IACzB,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAe;EACbC,UAAU,EAAE,IAAI;EAChBX,KAAK;EACLE,SAAS;EACTG;AACF,CAAC","ignoreList":[]}]}